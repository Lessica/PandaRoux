<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="site-base">
<head>
    <title>Group</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap-datepicker.css}">
    <script th:src="@{/js/bootstrap-datepicker.js}"></script>
    <script>

        $(document).ready(function () {

            'use strict';

            console.log("document ready");

            class APIService extends BaseAPIService {
                getGroupList (callback) {
                    $.ajax("/api/groupe", {
                        success: callback
                    });
                }
                getGroupDetail (callback, gid) {
                    $.ajax("/api/groupe/" + gid.toString(), {
                        success: callback
                    });
                }
                getStudentList (callback) {
                    $.ajax("/api/user/students", {
                        success: callback
                    });
                }
                selectStudentsIntoGroup (callback, gid, sid_list) {
                    $.ajax("/api/groupe/" + gid.toString() + "/add/students", {
                        data: JSON.stringify({
                            "id_students": sid_list
                        }),
                        success: callback
                    });
                }
                removeStudentsFromGroup (callback, gid, sid_list) {
                    $.ajax("/api/groupe/" + gid.toString() + "/remove/students", {
                        data: JSON.stringify({
                            "id_students": sid_list
                        }),
                        success: callback
                    });
                }
                createGroup (callback, form_data) {
                    $.ajax("/api/groupe/add", {
                        data: JSON.stringify({
                            "name": form_data["name"]
                        }),
                        success: callback
                    });
                }
                createSession (callback, gid, form_data) {
                    $.ajax("/api/lecture/add", {
                        data: JSON.stringify({
                            "name": form_data["name"],
                            "groupe": {
                                "id": parseInt(gid)
                            }
                        }),
                        success: callback
                    });
                }
                removeSession (callback, sid) {
                    $.ajax("/api/lecture/" + sid.toString() + "/delete", {
                        success: callback
                    });
                }
                modifySession (callback, sid, form_data) {
                    $.ajax("/api/lecture/" + sid.toString() + "/modify", {
                        data: JSON.stringify(form_data),
                        success: callback
                    });
                }
                modifyGroup (callback, gid, form_data) {
                    $.ajax("/api/groupe/" + gid.toString() + "/modify", {
                        data: JSON.stringify(form_data),
                        success: callback
                    });
                }
            }

            class CreateGroupModalController {

                constructor () {
                    this.DOM = {
                        modalWindow: $("#new-group-popup"),
                        groupNameInput: $("#new-group-name"),
                        modalSubmitButton: $("#create-new-group")
                    };
                    this.bindEvent();
                }

                bindEvent () {
                    this.DOM.modalWindow.on('shown.bs.modal', $.proxy(function (event) {
                        this.DOM.groupNameInput.focus();
                    }, this));
                    this.DOM.groupNameInput.on("change paste keyup", $.proxy(function (event) {
                        const sender = $(event.currentTarget);
                        this.DOM.modalSubmitButton.attr('disabled', $.trim(sender.val()).length <= 0);
                    }, this));
                    this.DOM.groupNameInput.on("keypress", $.proxy(function (event) {
                        if (event.which === 13) {
                            const sender = $(event.currentTarget);
                            if ($.trim(sender.val()).length > 0) {
                                this.DOM.modalSubmitButton.click();
                            }
                        }
                    }, this));
                    this.DOM.modalSubmitButton.click($.proxy(function (event) {
                        const sender = $(event.currentTarget);
                        const new_group_name = this.DOM.groupNameInput.val();
                        document.APIService.createGroup($.proxy(function (resp) {
                            if (resp["result"] === "succeed") {
                                document.RootController.groupListController.load();
                                this.DOM.modalWindow.modal("hide");
                            }
                        }, this), {"name": new_group_name});
                    }, this));
                }

                reset () {
                    this.DOM.groupNameInput.val("");
                    this.DOM.modalSubmitButton.attr('disabled', true);
                }

                show () {
                    this.DOM.modalWindow.modal("show");
                }

            }

            class GroupListController {

                constructor () {
                    this.DOM = {
                        groupCreateButton: $("#common-new-group"), // button
                        groupList: $("#search-group-list"), // div
                        searchGroupInput: $("#search-group"),
                        selectedGroupId: null
                    };
                    this.createGroupModalController = new CreateGroupModalController();
                    this.bindEvent();
                    this.load();
                }

                bindEvent () {
                    this.DOM.groupCreateButton.click($.proxy(this.createGroupButtonClicked, this));
                }

                load () {
                    document.APIService.getGroupList($.proxy(this.reloadGroupList, this));
                }

                reload () {
                    document.RootController.workspaceController.reset();
                    document.RootController.workspaceController.hide();
                    this.load();
                }

                createGroupButtonClicked (event) {
                    this.createGroupModalController.reset();
                    this.createGroupModalController.show();
                }

                reloadGroupList (resp) {
                    console.log(resp);
                    this.DOM.groupList.html("");
                    const resp_group_list = resp["groupes"];
                    for (let i in resp_group_list) {
                        const resp_group = resp_group_list[i];
                        const new_group_button = document.DOMFactory.elementWithId("group-button", resp_group["name"], "btn-default");
                        new_group_button.attr('id', "group-button-" + resp_group['id']);
                        new_group_button.data(resp_group);
                        new_group_button.click($.proxy(this.groupButtonClicked, this));
                        this.DOM.groupList.prepend(new_group_button);
                    }
                }

                groupButtonClicked (event) {
                    const sender = $(event.currentTarget);
                    const data = sender.data();
                    console.log(data);
                    this.setSelectedGroup(data['id']);
                    document.RootController.workspaceController.loadWithId(data['id']);
                }

                setSelectedGroup (group_id) {
                    this.DOM.selectedGroupId = parseInt(group_id);
                    $(".group-button").removeClass("btn-primary");
                    if (group_id) {
                        $("#group-button-" + group_id.toString()).addClass("btn-primary");
                    }
                }

                setGroupName (group_id, group_name) {
                    if (group_id && group_name) {
                        const new_group_button = document.DOMFactory.elementWithId("group-button", group_name, "btn-default");
                        $("#group-button-" + group_id.toString()).html(new_group_button.html());
                        console.log(group_name);
                    }
                }

            }

            class CreateSessionModalController {

                constructor () {
                    this.DOM = {
                        modalWindow: $("#new-session-popup"),
                        sessionNameInput: $("#new-session-name"),
                        modalSubmitButton: $("#create-new-session")
                    };
                    this.bindEvent();
                }

                bindEvent () {
                    this.DOM.modalWindow.on('shown.bs.modal', $.proxy(function (event) {
                        this.DOM.sessionNameInput.focus();
                    }, this));
                    this.DOM.sessionNameInput.on("change paste keyup", $.proxy(function (event) {
                        const sender = $(event.currentTarget);
                        this.DOM.modalSubmitButton.attr('disabled', $.trim(sender.val()).length <= 0);
                    }, this));
                    this.DOM.sessionNameInput.on("keypress", $.proxy(function (event) {
                        if (event.which === 13) {
                            const sender = $(event.currentTarget);
                            if ($.trim(sender.val()).length > 0) {
                                this.DOM.modalSubmitButton.click();
                            }
                        }
                    }, this));
                    this.DOM.modalSubmitButton.click($.proxy(function (event) {
                        const sender = $(event.currentTarget);
                        const new_session_name = this.DOM.sessionNameInput.val();
                        const group_id = document.RootController.groupListController.DOM.selectedGroupId;
                        document.APIService.createSession($.proxy(function (resp) {
                            if (resp["result"] === "succeed") {
                                document.RootController.workspaceController.loadWithId(group_id);
                                this.DOM.modalWindow.modal("hide");
                            }
                        }, this), group_id, {"name": new_session_name});
                    }, this));
                }

                reset () {
                    this.DOM.sessionNameInput.val("");
                    this.DOM.modalSubmitButton.attr('disabled', true);
                }

                show () {
                    this.DOM.modalWindow.modal("show");
                }

            }

            class EditSessionModalController {

                constructor () {
                    this.DOM = {
                        modalWindow: $("#evaluation-popup"),
                        rateBoxGroup: $("input[name=rate-group]"),
                        commentTextarea: $("#session-comment-input"),
                        modalSubmitButton: $("#save-session"),
                        modalTitle: $("#edit-session-title")
                    };
                    this.bindEvent();
                }

                bindEvent () {
                    this.DOM.modalWindow.on('shown.bs.modal', $.proxy(function (event) {
                        this.DOM.commentTextarea.focus();
                    }, this));
                    this.DOM.modalSubmitButton.click($.proxy(function (event) {
                        const sender = $(event.currentTarget);
                        const data = sender.data();
                        const rate = this.DOM.rateBoxGroup.parent().find(":checked").val();
                        const commentary = this.DOM.commentTextarea.val();
                        const group_id = document.RootController.groupListController.DOM.selectedGroupId;
                        document.APIService.modifySession($.proxy(function (resp) {
                            if (resp["result"] === "succeed") {
                                document.RootController.workspaceController.loadWithId(group_id);
                                this.DOM.modalWindow.modal("hide");
                            }
                        }, this), data['id'], {"rate": parseInt(rate), "commentary": commentary});
                    }, this));
                }

                reset () {
                    this.DOM.rateBoxGroup.parent().find(":checked").prop('checked', false);
                    this.DOM.commentTextarea.val("");
                }

                show () {
                    this.DOM.modalWindow.modal("show");
                }

                load (data) {
                    const rate_option = this.DOM.rateBoxGroup.parent().find("#rate-r" + data["rate"]);
                    rate_option.prop('checked', true);
                    this.DOM.modalTitle.text("Edit Session: " + data["name"]);
                    this.DOM.commentTextarea.val(data["commentary"]);
                    this.DOM.modalSubmitButton.data(data);
                }

            }

            class WorkspaceController {

                constructor () {
                    this.DOM = {
                        workspace: $(".group-detail"), // div
                        groupTitle: $(".group-title"), // input val()
                        selectedStudentList: $("#search-selected-student-list"), // div
                        sessionList: $("#search-session-list"), // div
                        searchSelectedStudentInput: $("#search-selected-student"),
                        searchSessionInput: $("#search-session"),
                        createSessionPanel: $("#create-session-panel"),
                        groupRemoveButton: $("#remove-group"),
                    };
                    this.createSessionModalController = new CreateSessionModalController();
                    this.editSessionModalController = new EditSessionModalController();
                    this.bindEvent();
                }

                bindEvent () {
                    this.DOM.groupTitle.blur($.proxy(this.groupTitleInputBlured, this));
                    this.DOM.groupTitle.on("keypress", $.proxy(function (event) {
                        const sender = $(event.currentTarget);
                        if (event.which === 13) {
                            if ($.trim(sender.val()).length > 0) {
                                this.DOM.groupTitle.blur();
                            }
                        }
                    }, this));
                    this.DOM.groupRemoveButton.click($.proxy(this.removeGroupButtonClicked, this));
                    this.DOM.createSessionPanel.click($.proxy(this.createSessionPanelClicked, this));
                }

                removeGroupButtonClicked (event) {
                    const sender = $(event.currentTarget);
                    const data = sender.data();
                    console.log(data);
                    const group_id = data["id"];
                    swal({
                        title: "Are you sure?",
                        text: "The group and its related sessions will be deleted! \n" +
                        "You will not be able to revoke this operation!",
                        type: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#DD6B55",
                        confirmButtonText: "Yes, delete it!",
                        closeOnConfirm: false,
                        html: false
                    }, $.proxy(function () {

                    }, this));
                }

                groupTitleInputBlured (event) {
                    const sender = $(event.currentTarget);
                    const data = sender.data();
                    const group_name = sender.val();
                    if (data && group_name.length <= 0) {
                        sender.val(data["name"]);
                    } else {
                        const group_id = data["id"];
                        document.APIService.modifyGroup($.proxy(function (resp) {
                            if (resp["result"] === "succeed") {
                                document.RootController.groupListController.setGroupName(group_id, group_name);
                                this.loadWithId(group_id);
                            }
                        }, this), group_id, {"name": group_name});
                    }
                }

                createSessionPanelClicked (event) {
                    this.createSessionModalController.reset();
                    this.createSessionModalController.show();
                }

                reset () {
                    document.RootController.studentListController.reloadStudentList(null);
                    this.DOM.selectedStudentList.html("");
                    this.DOM.sessionList.html("");
                    this.DOM.groupTitle.val("");
                    this.DOM.searchSelectedStudentInput.val("");
                    this.DOM.searchSessionInput.val("");
                }

                show () {
                    this.DOM.workspace.fadeIn(200);
                }

                hide () {
                    this.DOM.workspace.fadeOut(200);
                }

                focusOnTitle () {
                    this.DOM.groupTitle.focus();
                }

                loadWithId (gid) {
                    document.APIService.getGroupDetail($.proxy(this.load, this), gid);
                }

                load (resp) {
                    console.log(resp);
                    this.reset();
                    this.loadGroupTitle(resp);
                    this.loadSelectedStudentList(resp);
                    this.loadSessionList(resp);
                    this.show();
                }

                loadGroupTitle (resp) {
                    this.DOM.groupTitle.val(resp["name"]);
                    this.DOM.groupTitle.data(resp);
                    this.DOM.groupRemoveButton.data(resp);
                }

                loadSelectedStudentList (resp) {
                    document.RootController.studentListController.reloadStudentList(null);
                    this.DOM.selectedStudentList.html("");
                    const resp_selected_student_list = resp["groupeDetails"]["students"];
                    for (let i in resp_selected_student_list) {
                        const resp_selected_student = resp_selected_student_list[i];
                        const new_student_button = document.DOMFactory.elementWithId("student-button", resp_selected_student["name"] + " " + resp_selected_student["first_name"], "btn-default", "glyphicon-remove");
                        new_student_button.attr('id', "selected-student-button-" + resp_selected_student['id']);
                        new_student_button.data(resp_selected_student);
                        new_student_button.click($.proxy(this.selectedStudentButtonClicked, this));
                        const orig_student_button = $("#student-button-" + resp_selected_student['id']);
                        this.markStudentButton(orig_student_button, true);
                        this.DOM.selectedStudentList.append(new_student_button);
                    }
                }

                markStudentButton (btn, mark) {
                    const logo = btn.find("span");
                    if (mark) {
                        btn.addClass("btn-success");
                        logo.removeClass("glyphicon-plus");
                        logo.addClass("glyphicon-ok");
                    } else {
                        btn.removeClass("btn-success");
                        logo.removeClass("glyphicon-ok");
                        logo.addClass("glyphicon-plus");
                    }
                }

                loadSessionList (resp) {
                    this.DOM.sessionList.html("");
                    const resp_session_list = resp["groupeDetails"]["lectures"];
                    for (let i in resp_session_list) {
                        const resp_session = resp_session_list[i];
                        const has_comment = resp_session["commentary"] && resp_session["commentary"].length !== 0;
                        let new_session_panel;
                        if (has_comment) {
                            new_session_panel = document.DOMFactory.elementWithId("session-panel", resp_session["name"], "View Note", "panel-default", "btn-default", "glyphicon-search");
                        } else {
                            new_session_panel = document.DOMFactory.elementWithId("session-panel", resp_session["name"], "Create Note", "panel-success", "btn-success", "glyphicon-plus");
                        }
                        new_session_panel.data(resp_session);
                        const remove_button = new_session_panel.find("#remove-session");
                        remove_button.data(resp_session);
                        remove_button.click($.proxy(this.removeSessionButtonClicked, this));
                        const select_date_input = new_session_panel.find("#select-date");
                        select_date_input.val(resp_session['date']);
                        select_date_input.data(resp_session);
                        select_date_input.datepicker({
                            format: 'yyyy-mm-dd',
                            autoclose: true
                        }).on("changeDate", $.proxy(this.changeSessionDateEventTriggered, this));
                        const edit_session_button = new_session_panel.find("#edit-session");
                        edit_session_button.data(resp_session);
                        edit_session_button.click($.proxy(this.editSessionButtonClicked, this));
                        this.DOM.sessionList.prepend(new_session_panel);
                    }
                }

                editSessionButtonClicked (event) {
                    const sender = $(event.currentTarget);
                    const data = sender.data();
                    console.log(data);
                    this.editSessionModalController.reset();
                    this.editSessionModalController.load(data);
                    this.editSessionModalController.show();
                }

                changeSessionDateEventTriggered (event) {
                    const sender = $(event.currentTarget);
                    const data = sender.data();
                    console.log(data);
                    const date = sender.val();
                    this.changeSessionDate(data['id'], date);
                }

                changeSessionDate (sid, date) {
                    const group_id = document.RootController.groupListController.DOM.selectedGroupId;
                    document.APIService.modifySession($.proxy(function (resp) {
                        if (resp["result"] === "succeed") {
                            this.loadWithId(group_id);
                        }
                    }, this), sid, {"date": date});
                }

                removeSessionButtonClicked (event) {
                    const sender = $(event.currentTarget);
                    const data = sender.data();
                    console.log(data);
                    swal({
                        title: "Are you sure?",
                        text: "The session will be deleted! \n" +
                        "You will not be able to revoke this operation!",
                        type: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#DD6B55",
                        confirmButtonText: "Yes, delete it!",
                        closeOnConfirm: false,
                        html: false
                    }, $.proxy(function () {
                        this.removeSession(data['id']);
                    }, this));
                }

                removeSession (sid) {
                    const group_id = document.RootController.groupListController.DOM.selectedGroupId;
                    document.APIService.removeSession($.proxy(function (resp) {
                        if (resp["result"] === "succeed") {
                            this.loadWithId(group_id);
                            swal("Deleted!",
                                "This session has been deleted.",
                                "success");
                        }
                    }, this), sid);
                }

                selectedStudentButtonClicked (event) {
                    const sender = $(event.currentTarget);
                    const data = sender.data();
                    console.log(data);
                    const group_id = document.RootController.groupListController.DOM.selectedGroupId;
                    document.APIService.removeStudentsFromGroup($.proxy(function (resp) {
                        if (resp["result"] === "succeed") {
                            this.loadWithId(group_id);
                        }
                    }, this), group_id, [data['id']]);
                }
            }

            class StudentListController {

                constructor () {
                    this.DOM = {
                        searchStudentInput: $("#search-student"),
                        studentList: $("#search-student-list"),
                        dataStudentList: null // lazy load
                    };
                    this.load();
                }

                load () {
                    document.APIService.getStudentList($.proxy(this.reloadStudentList, this));
                }

                reset () {
                    this.DOM.studentList.html("");
                    this.DOM.searchStudentInput.val("");
                }

                reloadStudentList (resp) {
                    // load from cache
                    if (resp === null) {
                        resp = this.DOM.dataStudentList;
                    } else {
                        console.log(resp);
                    }
                    // still null check
                    if (resp === null) {
                        return;
                    } else {
                        this.DOM.dataStudentList = resp;
                    }
                    this.DOM.studentList.html("");
                    const resp_student_list = resp["students"];
                    for (let i in resp_student_list) {
                        const resp_student = resp_student_list[i];
                        const new_student_button = document.DOMFactory.elementWithId("student-button", resp_student["name"] + " " + resp_student["first_name"], "btn-default", "glyphicon-plus");
                        new_student_button.attr('id', "student-button-" + resp_student['id']);
                        new_student_button.data(resp_student);
                        new_student_button.click($.proxy(this.studentButtonClicked, this));
                        this.DOM.studentList.append(new_student_button);
                    }
                }

                studentButtonClicked (event) {
                    const sender = $(event.currentTarget);
                    const data = sender.data();
                    if (sender.hasClass("btn-success")) {
                        event.preventDefault();
                        return;
                    }
                    console.log(data);
                    const group_id = document.RootController.groupListController.DOM.selectedGroupId;
                    document.APIService.selectStudentsIntoGroup($.proxy(function (resp) {
                        if (resp["result"] === "succeed") {
                            document.RootController.workspaceController.loadWithId(group_id);
                        }
                    }, this), group_id, [data['id']]);
                }

            }

            class ViewController {

                constructor () {
                    this.bindSearchPair();
                    this.workspaceController = new WorkspaceController();
                    this.groupListController = new GroupListController();
                    this.studentListController = new StudentListController();
                }

                bindSearchPair () {
                    const BindSearchEventPair = function (input_s, list_s, where_s) {
                        $(input_s).on("change keyup paste", $.proxy(function (event) {
                            const sender = $(event.currentTarget);
                            const sc = sender.val();
                            $(list_s).each(function () {
                                const e = $(this);
                                let st;
                                if (where_s === null) {
                                    st = e.text();
                                }
                                else {
                                    st = $(this).find(where_s).text();
                                }
                                if (st.indexOf(sc) !== -1) {
                                    e.show();
                                }
                                else {
                                    e.hide();
                                }
                            });
                        }, this));
                    };
                    BindSearchEventPair("#search-group", "#search-group-list > button", null);
                    BindSearchEventPair("#search-student", "#search-student-list > button", null);
                    BindSearchEventPair("#search-selected-student", "#search-selected-student-list > button", null);
                    BindSearchEventPair("#search-session", "#search-session-list > div", "h3");
                }

            }

            {
                document.APIService = new APIService();
                document.RootController = new ViewController();
            }

        });

    </script>

    <!-- JS TEMPLATE ENGINE -->

    <script id="template-group-button" type="text/plain" language="text">
        <button id="group-button" type="button" class="btn {2} btn-block group-button">
            {1}
            <span class="glyphicon glyphicon-chevron-right btn-icon float-right"></span>
        </button>
    </script>

    <script id="template-student-button" type="text/plain" language="text">
        <button type="button" class="btn {2} btn-block student-button">
            {1}
            <span class="glyphicon {3} btn-icon float-right"></span>
        </button>
    </script>

    <script id="template-session-panel" type="text/plain" language="text">
        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="panel {3} roux-panel panel-session">
                <div class="panel-heading">
                    <h3 class="session-panel-title">
                        {1}
                    </h3>
                    <span id="remove-session" class="glyphicon glyphicon-trash session-title-button float-right"></span>
                </div>
                <div class="panel-body">
                    <div class="input-group">
                        <input id="select-date" type="text" class="form-control select-date" readonly title="">
                        <span class="input-group-addon">
                        <i class="glyphicon glyphicon-calendar"></i>
                </span>
                    </div>
                    <br>
                    <button id="edit-session" type="button" class="btn {4} btn-block">
                        <span class="glyphicon {5}"></span>
                        {2}
                    </button>
                </div>
            </div>
        </div>
    </script>

</head>
<body>

<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand header-brand" th:href="@{/teacher/index}" layout:fragment="nav-header">
                <img class="header-icon" th:src="@{/img/roux.png}" src="">
            </a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav" layout:fragment="nav-content">
                <li class="active"><a th:href="@{/teacher/group}">Group</a></li>
                <li><a th:href="@{/teacher/question}">Question</a></li>
                <li><a th:href="@{/teacher/questionnaire}">Questionnaire</a></li>
                <li><a th:href="@{/teacher/statistics}">Statistics</a></li>
            </ul>
        </div>
    </div>
</nav>

<div layout:fragment="container">

    <div class="row roux-row">

        <!-- Group Panel -->
        <div class="col-sm-4">
            <div class="panel panel-default roux-panel">
                <div class="panel-body">

                    <div class="input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-search"></span>
                        </span>
                        <input id="search-group" type="text" class="form-control" placeholder="Search group">
                    </div>
                    <br>

                    <div class="scroll-list">
                        <div class="scroll-list-group">
                            <button id="common-new-group" type="button" class="btn btn-success btn-block">
                                <span class="glyphicon glyphicon-plus"></span>
                                New Group
                            </button>
                            <hr>
                            <div id="search-group-list" class="group-button-list"></div>
                        </div>
                    </div>
                    <br>

                </div>
            </div>
        </div>

        <div class="group-detail" style="display: none;">

            <div class="col-sm-8">

                <div class="row">

                    <!-- Group Title -->
                    <div class="col-sm-12">
                        <div class="panel panel-default roux-panel">
                            <div class="panel-body group-header">

                                <div class="row">

                                </div>

                                <input class="group-title" type="text" placeholder="Untitled Group">
                                <span id="remove-group" class="glyphicon glyphicon-trash title-button float-right"></span>

                            </div>
                        </div>
                    </div>

                    <!-- All Students Panel -->
                    <div class="col-sm-6">
                        <div class="panel panel-default roux-panel">
                            <div class="panel-body">

                                <div class="input-group">
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-search"></span>
                                    </span>
                                    <input id="search-student" type="text" class="form-control"
                                           placeholder="All students">
                                </div>
                                <br>

                                <div class="scroll-list">
                                    <div class="scroll-list-all-student">
                                        <div id="search-student-list" class="student-button-list"></div>
                                    </div>
                                </div>
                                <br>

                            </div>
                        </div>
                    </div>

                    <!-- Selected Students Panel -->
                    <div class="col-sm-6">
                        <div class="panel panel-default roux-panel">
                            <div class="panel-body">

                                <div class="input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-search"></span>
                        </span>
                                    <input id="search-selected-student" type="text" class="form-control"
                                           placeholder="Selected students">
                                </div>
                                <br>

                                <div class="scroll-list">
                                    <div class="scroll-list-selected-student">
                                        <div id="search-selected-student-list"
                                             class="selected-student-button-list"></div>
                                    </div>
                                </div>
                                <br>

                            </div>
                        </div>
                    </div>

                    <!-- Session Panel -->
                    <div class="col-sm-12">
                        <div class="panel panel-default roux-panel">

                            <div class="panel-heading">
                                <h3 class="session-panel-title">Session</h3>
                            </div>

                            <div class="panel-body">

                                <div class="input-group">
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-search"></span>
                        </span>
                                    <input id="search-session" type="text" class="form-control"
                                           placeholder="Search session">
                                </div>
                                <br>

                                <div class="row session-row">

                                    <!-- Add Session Sub Panel -->
                                    <div class="col-sm-6 col-md-4 col-lg-3">
                                        <div id="create-session-panel"
                                             class="panel panel-default roux-panel panel-session-add">
                                            <div class="panel-body">
                                                <div class="panel-session-wrap">
                                                    <span class="glyphicon glyphicon-plus"></span>
                                                    <br>Add session
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="search-session-list" class="session-panel-list"></div>

                                </div>
                                <br>

                            </div>

                        </div>
                    </div>

                </div>

            </div>

        </div>

    </div>

    <!-- Modal (Pop-up) Group Add -->
    <div class="modal fade" id="new-group-popup" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
                    <h4 class="modal-title">New Group</h4>
                </div>

                <div class="modal-body">
                    <div class="input-group">
                        <input id="new-group-name" type="text" class="form-control" placeholder="Group Name">
                        <div class="input-group-btn">
                            <button type="button" class="btn btn-default" aria-label="Help"><span
                                    class="glyphicon glyphicon-question-sign"></span></button>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button id="create-new-group" type="button" class="btn btn-success" disabled>Save
                    </button>
                </div>

            </div>
        </div>
    </div>

    <!-- Modal (Pop-up) Session Add -->
    <div class="modal fade" id="new-session-popup" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
                    <h4 class="modal-title">New Session</h4>
                </div>

                <div class="modal-body">
                    <div class="input-group">
                        <input id="new-session-name" type="text" class="form-control" placeholder="Session Name">
                        <div class="input-group-btn">
                            <button type="button" class="btn btn-default" aria-label="Help"><span
                                    class="glyphicon glyphicon-question-sign"></span></button>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button id="create-new-session" type="button" class="btn btn-success" disabled>Save
                    </button>
                </div>

            </div>
        </div>
    </div>

    <!-- Modal (Pop-up) Evaluation -->
    <div class="modal fade" id="evaluation-popup" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
                    <h4 id="edit-session-title" class="modal-title">Evaluation Pop-up</h4>
                </div>

                <div class="modal-body">

                    <!-- Rate Input -->
                    <div class="input-group">
                        <h4>
                            <span class="glyphicon glyphicon-edit"></span>
                            Rate for the session:
                        </h4>
                    </div>

                    <div class="rate-input">
                        <div class="rate-button rate-button-r1">
                            <input id="rate-r1" type="radio" name="rate-group" class="rate-radio" value="1"/>
                            <label for="rate-r1">1</label>
                        </div>
                        <div class="rate-button rate-button-r2">
                            <input id="rate-r2" type="radio" name="rate-group" class="rate-radio" value="2"/>
                            <label for="rate-r2">2</label>
                        </div>
                        <div class="rate-button rate-button-r3">
                            <input id="rate-r3" type="radio" name="rate-group" class="rate-radio" value="3"/>
                            <label for="rate-r3">3</label>
                        </div>
                        <div class="rate-button rate-button-r4">
                            <input id="rate-r4" type="radio" name="rate-group" class="rate-radio" value="4"/>
                            <label for="rate-r4">4</label>
                        </div>
                        <div class="rate-button rate-button-r5">
                            <input id="rate-r5" type="radio" name="rate-group" class="rate-radio" value="5"/>
                            <label for="rate-r5">5</label>
                        </div>
                    </div>

                    <!-- Comment Input -->
                    <div class="input-group">
                        <h4>
                            <span class="glyphicon glyphicon-edit"></span>
                            Comment on the session:
                        </h4>
                    </div>

                    <div class="comment-input">
                        <textarea id="session-comment-input" name="comment-area" class="form-control" rows="6"
                                  title=""></textarea>
                    </div>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button id="save-session" type="button" class="btn btn-primary">Save changes
                    </button>
                </div>

            </div>
        </div>
    </div>

</div>

</body>
</html>
